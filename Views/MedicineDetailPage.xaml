<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MedicinesTracker.Views.MedicineDetailPage"
             xmlns:viewModels="clr-namespace:MedicinesTracker.ViewModels"
             Title="Информация о лекарстве">
    <VerticalStackLayout>
        <Border  Margin="0,0,0,10">
            <Border.GestureRecognizers>
                <TapGestureRecognizer
                    Command="{Binding Source={RelativeSource AncestorType={x:Type viewModels:MedicineDetailVM}}, Path=BaseInfoTappedCommand}"
                    CommandParameter="{Binding .}"/>    
            </Border.GestureRecognizers>
            <StackLayout Spacing="10" 
                         Padding="15">
                <HorizontalStackLayout Spacing="10">
                    <Image Source="medicine_card_icon.png"
                           WidthRequest="30"
                           HeightRequest="30"
                           VerticalOptions="Start"
                           Margin="0,3,0,0"/>
                    <VerticalStackLayout Spacing="10" >
                        <StackLayout Spacing="5">
                            <Label Text="Основная информация"
                                   FontSize="16"
                                   FontAttributes="Bold"/>
                            <Label Text="{Binding Medicine.Name}"
                                   FontSize="14"
                                   TextColor="{StaticResource Gray500}"
                                   Opacity="0.9"/>
                            <Label Text="{Binding Medicine.MethodAdmission.Name, StringFormat='{0} тип приёма'}"
                                   FontSize="14"
                                   TextColor="{StaticResource Gray500}"
                                   Opacity="0.9"/>  
                        </StackLayout>
                        <StackLayout>
                            <Label Text="Добавить рекомендации по приёму →"
                               FontSize="14"
                               TextColor="{StaticResource PrimaryDark}"/>
                        </StackLayout>
                    </VerticalStackLayout>
                </HorizontalStackLayout>
            </StackLayout>
        </Border>
        <Border Margin="0,0,0,10">
            <Border.GestureRecognizers>
                <TapGestureRecognizer
                    Command="{Binding Source={RelativeSource AncestorType={x:Type viewModels:MedicineDetailVM}}, Path=StockTappedCommand}"
                    CommandParameter="{Binding .}"/>
            </Border.GestureRecognizers>
            <StackLayout Spacing="10" 
                         Padding="15">
                <HorizontalStackLayout Spacing="10">
                    <Image 
                        Source="medicine_box_filled.png"
                        WidthRequest="30"
                        HeightRequest="30"
                        VerticalOptions="Start"
                        Margin="0,3,0,0"/>
                    <VerticalStackLayout Spacing="10" >
                        <StackLayout Spacing="5">
                            <Label 
                                Text="Запас"
                                FontSize="16"
                                FontAttributes="Bold"/>
                            <HorizontalStackLayout Spacing="5">
                                <Label 
                                    Text="{Binding Medicine.Stock.CurrentQuantity, StringFormat='Осталось {0}'}"
                                    FontSize="14"
                                    TextColor="{StaticResource Gray500}"
                                    Opacity="0.9"/>
                                <Label 
                                    Text="{Binding Medicine.Unit.Name}"
                                    FontSize="14"
                                    TextColor="{StaticResource Gray500}"
                                    Opacity="0.9"
                                    VerticalOptions="Center"
                                    Grid.Column="0" />      
                            </HorizontalStackLayout>
                        </StackLayout>
                        <StackLayout>
                            <Label 
                                Text="Редактировать запас →"
                                FontSize="14"
                                TextColor="{StaticResource PrimaryDark}"/>
                        </StackLayout>
                    </VerticalStackLayout>
                </HorizontalStackLayout>
            </StackLayout>
        </Border>
        <Border Margin="0,0,0,10">
            <Border.GestureRecognizers>
                <TapGestureRecognizer
                    Command="{Binding Source={RelativeSource AncestorType={x:Type viewModels:MedicineDetailVM}}, Path=NotificationTappedCommand}"
                    CommandParameter="{Binding .}"/>    
            </Border.GestureRecognizers>
            <StackLayout 
                Spacing="10"
                Padding="15">
                <HorizontalStackLayout Spacing="10">
                    <Image 
                        Source="date_time.png"
                        WidthRequest="30"
                        HeightRequest="30"
                        VerticalOptions="Start"
                        Margin="0,3,0,0"/>
                    <VerticalStackLayout Spacing="10" >
                        <StackLayout Spacing="5">
                            <Label 
                                Text="График приёма лекарств"
                                FontSize="16"
                                FontAttributes="Bold"/>
                            <Label 
                                Text="{Binding Medicine.ScheduleString}"
                                FontSize="14" 
                                TextColor="{StaticResource Gray500}"
                                Opacity="0.9"/>
                        </StackLayout>
                        <StackLayout>
                            <Label 
                                Text="Редактировать график приёма →"
                                FontSize="14"
                                TextColor="{StaticResource PrimaryDark}"/>   
                        </StackLayout>
                    </VerticalStackLayout>
                </HorizontalStackLayout>
            </StackLayout>
        </Border>
        <Button
            Text="Удалить лекарство"
            TextColor="{StaticResource PrimaryDark}"
            FontSize="16"
            Margin="0,10,0,0"
            FontAttributes="Bold"
            Padding="0"
            BackgroundColor="Transparent"
            BorderColor="Transparent"
            CornerRadius="0"
            Opacity="1"
            Grid.Column="1" />
    </VerticalStackLayout>
</ContentPage>